# NodeCanvas - プロジェクト概要

## プロジェクトビジョン

NodeCanvasは、VSCode上で動作するCanvas型ノードエディタです。従来のBashスクリプト専用エディタから進化し、メモ、ファイル、bash関数など多様なコンテンツを無限キャンバス上に自由に配置し、視覚的なワークフローを構築できるツールとなります。

## コンセプト

### Canvas型エディタとは
- **無限キャンバス**: 制限のない2D空間でのノード配置
- **自由度の高い配置**: グリッドに縛られない自然な配置
- **多様なコンテンツ**: テキスト、ファイル、関数、画像等の統合

### インスピレーション
- **Obsidian Canvas**: ノード型思考整理ツール
- **ComfyUI**: AI画像生成ワークフローエディタ
- **Blender Shader Editor**: ノードベースの視覚的編集

## 主要機能

### ノードタイプ
1. **MemoNode**: Markdownテキストメモ
   - リッチテキスト編集
   - サイズ可変
   - 色分け・タグ付け機能

2. **FileNode**: ローカルファイル参照
   - ファイルパス指定
   - プレビュー機能
   - ファイル更新監視

3. **BashFunctionNode**: bash関数定義・実行
   - 関数定義エディタ
   - 入力・出力パラメータ定義
   - 実行ボタンと結果表示

4. **ConnectorNode**: データフロー制御
   - ノード間のデータ受け渡し
   - 条件分岐
   - ループ制御

### ワークフロー実行
- **ノード単体実行**: 個別ノードの実行
- **フロー実行**: 接続されたノード群の順次実行
- **並列実行**: 独立したパスの同時実行

### データフロー
- **型システム**: string, number, file, array等
- **変換機能**: 型間の自動変換
- **エラーハンドリング**: 実行時エラーの伝播と処理

## 技術アーキテクチャ

### フロントエンド
- **React**: UIフレームワーク
- **React Flow**: ノードエディタ基盤
- **TypeScript**: 型安全性

### VSCode統合
- **Extension API**: VSCode拡張機能
- **WebView**: Canvas UI表示
- **テーマ連携**: ダーク/ライトテーマ対応

### 拡張ライブラリ
- **Monaco Editor**: コードエディタ（bash関数用）
- **Markdown-it**: Markdownレンダリング
- **Chokidar**: ファイル監視

## 開発フェーズ

### Canvas Phase 1: プロジェクト再定義
- プロジェクト名変更（NodeEditor → NodeCanvas）
- 新コンセプトの詳細定義
- アーキテクチャ設計

### Canvas Phase 2: 新ノードタイプ実装
- MemoNode実装
- FileNode実装
- BashFunctionNode実装
- ConnectorSystem実装

### Canvas Phase 3: ワークフロー実行エンジン
- bash関数パーサー
- 実行エンジン
- データフロー制御
- エラーハンドリング

### Canvas Phase 4: UI/UX改善
- 無限キャンバス最適化
- ノードパレット
- 視覚的改善
- 操作性向上

### Canvas Phase 5: ファイル管理
- プロジェクト保存・読み込み
- インポート・エクスポート
- バージョン管理連携

## ユーザーエクスペリエンス

### 操作方式
- **ドラッグ&ドロップ**: ノードの自由配置
- **コンテキストメニュー**: 右クリックでのアクション
- **キーボードショートカット**: 効率的な操作

### ビジュアルデザイン
- **VSCodeテーマ連携**: ダーク/ライトテーマ対応
- **ノードタイプ別スタイリング**: 視認性の向上
- **実行状態表示**: 進行中、完了、エラー状態の可視化

## 将来の拡張性

### 追加ノードタイプ
- ImageNode: 画像表示・編集
- DatabaseNode: データベース接続
- APINode: HTTP API呼び出し

### 高度な機能
- リアルタイム協働編集
- クラウド同期
- プラグインシステム

## 成功指標

### 短期目標
- 基本的なノードタイプの実装
- 簡単なワークフローの実行
- VSCodeとの安定した統合

### 中期目標
- 高度なワークフロー構築
- パフォーマンス最適化
- ユーザビリティ向上

### 長期目標
- エコシステムの構築
- コミュニティ形成
- 他ツールとの連携